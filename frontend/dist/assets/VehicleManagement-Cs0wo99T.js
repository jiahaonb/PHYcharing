import{_ as N}from"./_plugin-vue_export-helper-BCEt7Ct6.js";/* empty css                   *//* empty css                     *//* empty css                 *//* empty css                        *//* empty css                *//* empty css                        */import"./el-tooltip-l0sNRNKZ.js";/* empty css                     *//* empty css                  */import{r as n,F as U,c as q,o as z,d as l,w as t,K as D,H as R,I as m,m as i,aa as W,ab as A,k as H,l as d,b,t as K,x as j,ae as G,E as J,h as L,i as O,$ as P,a8 as Q}from"./index-DURBC1W6.js";const S={class:"vehicle-management"},X={class:"card-header"},Y={__name:"VehicleManagement",setup(Z){const g=n([]),r=n(!1),c=n(""),_=n(!1),f=n(),a=n({license_plate:"",model:"",battery_capacity:50}),w={license_plate:[{required:!0,message:"请输入车牌号",trigger:"blur"}],model:[{required:!0,message:"请输入型号",trigger:"blur"}],battery_capacity:[{required:!0,message:"请输入电池容量",trigger:"blur"}]},v=async()=>{try{g.value=await m.get("/users/vehicles")}catch(s){console.error("获取车辆列表失败:",s),i.error("获取车辆列表失败")}},E=()=>{c.value="添加车辆",_.value=!1,a.value={license_plate:"",model:"",battery_capacity:50},r.value=!0},x=s=>{c.value="编辑车辆",_.value=!0,a.value={...s},r.value=!0},k=async()=>{f.value&&await f.value.validate(async s=>{if(s)try{_.value?(await m.put(`/users/vehicles/${a.value.id}`,a.value),i.success("车辆更新成功")):(await m.post("/users/vehicles",a.value),i.success("车辆添加成功")),r.value=!1,await v()}catch(e){console.error("保存车辆失败:",e),i.error("保存车辆失败")}})},h=async s=>{try{await Q.confirm(`确定要删除车辆 ${s.license_plate} 吗？`,"确认删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await m.delete(`/users/vehicles/${s.id}`),i.success("车辆删除成功"),await v()}catch(e){e!=="cancel"&&(console.error("删除车辆失败:",e),i.error("删除车辆失败"))}};return U(()=>{v()}),(s,e)=>{const C=K,u=H,p=A,B=W,$=D,V=O,y=L,I=P,M=J,T=R;return z(),q("div",S,[l($,null,{header:t(()=>[b("div",X,[e[6]||(e[6]=b("span",null,"车辆管理",-1)),l(u,{type:"primary",onClick:E},{default:t(()=>[l(C,null,{default:t(()=>[l(j(G))]),_:1}),e[5]||(e[5]=d(" 添加车辆 "))]),_:1,__:[5]})])]),default:t(()=>[l(B,{data:g.value,style:{width:"100%","min-height":"400px"},"empty-text":"暂无车辆，请添加车辆"},{default:t(()=>[l(p,{prop:"license_plate",label:"车牌号",width:"120"}),l(p,{prop:"model",label:"型号",width:"180"}),l(p,{prop:"battery_capacity",label:"电池容量(kWh)",width:"130"}),l(p,{label:"操作",width:"150"},{default:t(o=>[l(u,{size:"small",onClick:F=>x(o.row)},{default:t(()=>e[7]||(e[7]=[d("编辑")])),_:2,__:[7]},1032,["onClick"]),l(u,{size:"small",type:"danger",onClick:F=>h(o.row)},{default:t(()=>e[8]||(e[8]=[d("删除")])),_:2,__:[8]},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(T,{modelValue:r.value,"onUpdate:modelValue":e[4]||(e[4]=o=>r.value=o),title:c.value,width:"500px"},{footer:t(()=>[l(u,{onClick:e[3]||(e[3]=o=>r.value=!1)},{default:t(()=>e[10]||(e[10]=[d("取消")])),_:1,__:[10]}),l(u,{type:"primary",onClick:k},{default:t(()=>e[11]||(e[11]=[d("确定")])),_:1,__:[11]})]),default:t(()=>[l(M,{ref_key:"formRef",ref:f,model:a.value,rules:w,"label-width":"100px"},{default:t(()=>[l(y,{label:"车牌号",prop:"license_plate"},{default:t(()=>[l(V,{modelValue:a.value.license_plate,"onUpdate:modelValue":e[0]||(e[0]=o=>a.value.license_plate=o)},null,8,["modelValue"])]),_:1}),l(y,{label:"型号",prop:"model"},{default:t(()=>[l(V,{modelValue:a.value.model,"onUpdate:modelValue":e[1]||(e[1]=o=>a.value.model=o),placeholder:"例如：比亚迪汉EV、特斯拉Model 3"},null,8,["modelValue"])]),_:1}),l(y,{label:"电池容量",prop:"battery_capacity"},{default:t(()=>[l(I,{modelValue:a.value.battery_capacity,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value.battery_capacity=o),min:10,max:200,precision:1},null,8,["modelValue"]),e[9]||(e[9]=b("span",{style:{"margin-left":"10px"}},"kWh",-1))]),_:1,__:[9]})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},pe=N(Y,[["__scopeId","data-v-4c0ea615"]]);export{pe as default};
